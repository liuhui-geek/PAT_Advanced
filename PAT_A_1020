#include<iostream>
#include <cstdio>
#include<vector>
using namespace std;
int post[31];
int in[31];
vector<int> result(10000);
void pre(int root,int start,int end,int index) {
	if (start > end)
		return;
	int i = start;
	while (i<end && in[i] != post[root]) i++;
	result[index] = post[root];
	pre(root - (end - i + 1), start, i-1,2*index+1);
	pre(root - 1, i + 1, end,2*index+2);
}
int main() {
	int n = 0;
	cin >> n;
	for (int i = 0; i < n; i++) {
		cin >> post[i];
	}
	for (int i = 0; i < n; i++) {
		cin >> in[i];
	}
	pre(n-1,0,n-1,0);
	int sum = 0;
	for (int i = 0; i < result.size(); i++) {
		if (result[i] != 0) {
			cout << result[i];
			sum++;
			if (sum < n )
				cout << " ";
		}
		
	}
	return 0;
}